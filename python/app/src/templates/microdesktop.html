<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
  <div>
    <label for="fname">File name:</label><br>
    <input type="text" id="fname" name="fname"><br>
    <button type="button" id="search">Search</button>
  <div>
  <table id="ficheros" class="table table-bordered table-striped table-condensed">
                <thead>
                <tr>
                  <th>Key</th>
                  <th>Val</th>
                </tr>
                </thead>
                <tbody>
                  <tr>
                  <td>Dummy</td>
                  <td>Dummy</td>
                  </tr>
                </tbody>
  </table>

  <script type=text/javascript>
    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
  </script>
  <script type=text/javascript>
    $(document).ready(function () {

      $('#search').bind('click', function() {
        console.log("CLICKED");
        $.getJSON($SCRIPT_ROOT + '/commands/search/'+$("#fname").val(), function(data) {
          $.each( data, function( key, val ) {
            $('#ficheros tr:last').after('<tr><td>'+key+'</td><td>'+val+'</td></tr>');
          });
        });
      });
    });
</script>
</body>
